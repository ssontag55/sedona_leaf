<title>Leaflet Draw</title>

    <link rel="stylesheet" href="../jslib/css/draw.css" />
    <link rel="stylesheet" href="../jslib/css/leaflet.css" />
    <!-- 
    <link rel="stylesheet" href="../jslib/css/draw_measure.css" />
    <link rel="stylesheet" href="../jslib/css/fontawe.css" /> 
<script src="../jslib/control/leaflet.measurecontrol.js"></script>
    -->
    <script src="../jslib/leaf/leaflet.js"></script>
    <script src="../jslib/control/leaflet.draw.js"></script>
</head>
<body>
    <div id="map" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>
    
    <script>
    
        var cloudmadeUrl = 'http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png',
            cloudmade = new L.TileLayer(cloudmadeUrl, {maxZoom: 18}),
            map = new L.Map('map', {layers: [cloudmade], center: new L.LatLng(-37.7772, 175.2756), zoom: 15 });

        var drawnItems = new L.FeatureGroup();
        map.addLayer(drawnItems);

        var drawControl = new L.Control.Draw({
            draw: {
                position: 'topleft',
                polygon: {
                    title: 'Draw a sexy polygon!',
                    allowIntersection: false,
                    drawError: {
                        color: '#b00b00',
                        timeout: 1000
                    },
                    shapeOptions: {
                        color: '#bada55'
                    },
                    showArea: true
                },
                polyline: {
                    metric: false
                },
                circle: {
                    shapeOptions: {
                        color: '#662d91'
                    }
                }
            },
            edit: {
                featureGroup: drawnItems
            }
        });
        map.addControl(drawControl);

        map.on('draw:created', function (e) {
            var type = e.layerType,
                layer = e.layer;

            if (type === 'marker') {
                layer.bindPopup('A popup!');
            }

            drawnItems.addLayer(layer);
        });
        
    </script>
</body>
</html>
